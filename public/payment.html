<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top left, #a8e9ff, #0e1f40);
      overflow: hidden;
      position: relative;
    }

    body::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(-45deg, #5ddcff, #3c67e3, #4e00c2, #00c9ff);
      background-size: 400% 400%;
      animation: moveBg 10s ease infinite;
      z-index: 0;
    }

    @keyframes moveBg {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .box {
      position: relative;
      z-index: 5;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .payment-container {
      display: flex;
      width: 800px;
      max-width: 95%;
      border-radius: 25px;
      overflow: hidden;
      position: relative;
      backdrop-filter: blur(20px);
      background: rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.25);
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
      animation: glow 6s infinite alternate ease-in-out;
    }

    @keyframes glow {
      0% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.3); }
      50% { box-shadow: 0 0 35px rgba(0, 150, 255, 0.5); }
      100% { box-shadow: 0 0 25px rgba(255, 255, 255, 0.4); }
    }

    .amount-box {
      flex: 1;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      backdrop-filter: blur(15px);
      background: rgba(0, 0, 0, 0.25);
    }

    .amount-box h1 { font-size: 60px; margin-top: 10px; }

    .form-box {
      flex: 1.2;
      backdrop-filter: blur(20px);
      background: rgba(255, 255, 255, 0.25);
      padding: 30px;
      border-radius: 0 25px 25px 0;
      box-shadow: inset 0 0 10px rgba(255,255,255,0.2);
      color: white;
    }

    .form-box h2 {
      margin-bottom: 20px;
      text-align: center;
      color: #fff;
    }

    .tab-container {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .tab {
      flex: 1;
      text-align: center;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.2);
      margin: 0 5px;
      transition: 0.3s;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .tab.active {
      background: linear-gradient(90deg, #00eaff, #0072ff);
      color: #fff;
      border-color: transparent;
    }

    .payment-form { display: none; }
    .payment-form.active { display: block; animation: fadeIn 0.4s ease; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    input, select {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      background: rgba(255,255,255,0.2);
      color: white;
      outline: none;
    }

    input::placeholder { color: rgba(255,255,255,0.8); }
    select option { color: #000; }

    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(90deg, #00eaff, #0072ff);
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover { transform: scale(1.05); }

    .crystal {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);
      filter: blur(50px);
      opacity: 0;
      transform: scale(0.6);
      transition: 0.3s ease;
      z-index: 2;
    }

    body:hover .crystal { opacity: 1; transform: scale(1); }

    @media (max-width: 768px) {
      body {
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
        background: linear-gradient(135deg, #0e1f40, #1e90ff);
      }

      .box { flex-direction: column; height: auto; padding: 15px 10px; }

      .payment-container {
        flex-direction: column;
        width: 92%;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        padding: 10px;
        margin-top: 20px;
      }

      .amount-box {
        width: 100%;
        padding: 20px 10px;
        text-align: center;
        background: rgba(0, 0, 0, 0.35);
        border-radius: 15px;
        margin-bottom: 15px;
      }

      .form-box {
        width: 100%;
        padding: 20px 15px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 15px;
      }

      .tab-container { display: flex; justify-content: space-between; gap: 10px; margin-bottom: 20px; }
      .tab { flex: 1; padding: 8px; border-radius: 8px; text-align: center; font-size: 15px; }
    }
  </style>
</head>

<body>
  <div class="crystal" id="crystal"></div>
  <div class="box">
    <div class="payment-container">
      <div class="amount-box">
        <h3>Total Amount:</h3>
        <h1 id="amountDisplay">Loading...</h1>
      </div>

      <div class="form-box">
        <h2>Payment</h2>
        <div class="tab-container">
          <div class="tab active" id="cardTab">üí≥ Card</div>
          <div class="tab" id="onlineTab">üåê Online</div>
        </div>

        <!-- CARD FORM -->
        <div id="cardForm" class="payment-form active">
          <input id="cardNumber" placeholder="Card Number" maxlength="16" inputmode="numeric">
          <div style="display:flex;gap:10px;">
            <input id="expiry" placeholder="MM/YY" maxlength="5">
            <input id="cvv" placeholder="CVV" maxlength="3" inputmode="numeric">
          </div>
          <button onclick="pay('card')">Pay Now</button>
        </div>

        <!-- ONLINE FORM -->
        <div id="onlineForm" class="payment-form">
          <select id="method">
            <option>Select Method</option>
            <option value="GPay">GPay</option>
            <option value="PhonePe">PhonePe</option>
            <option value="Paytm">Paytm</option>
            <option value="UPI">UPI</option>
            <option value="NetBanking">Net Banking</option>
          </select>
          <input id="accountInput" placeholder="Enter UPI ID / Account No / Bank Name">
          <button onclick="pay('online')">Proceed</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const crystal = document.getElementById("crystal");
    document.addEventListener("mousemove", e => {
      crystal.style.left = e.pageX - 75 + "px";
      crystal.style.top = e.pageY - 75 + "px";
    });

    const params = new URLSearchParams(window.location.search);
    const price = parseFloat(params.get("price")) || 0;
    document.getElementById("amountDisplay").textContent = `‚Çπ${price.toLocaleString()}`;

    const cardTab = document.getElementById("cardTab");
    const onlineTab = document.getElementById("onlineTab");
    const cardForm = document.getElementById("cardForm");
    const onlineForm = document.getElementById("onlineForm");

    cardTab.onclick = () => {
      cardTab.classList.add("active");
      onlineTab.classList.remove("active");
      cardForm.classList.add("active");
      onlineForm.classList.remove("active");
    };

    onlineTab.onclick = () => {
      onlineTab.classList.add("active");
      cardTab.classList.remove("active");
      onlineForm.classList.add("active");
      cardForm.classList.remove("active");
    };

    // ‚úÖ Validation + Payment
    function pay(type) {
      if (type === "card") {
        const card = document.getElementById("cardNumber").value.trim();
        const expiry = document.getElementById("expiry").value.trim();
        const cvv = document.getElementById("cvv").value.trim();

        if (!/^\d{16}$/.test(card)) {
          alert("‚ö†Ô∏è Card number must be exactly 16 digits.");
          return;
        }

        if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(expiry)) {
          alert("‚ö†Ô∏è Expiry must be in MM/YY format.");
          return;
        }

        if (!/^\d{3}$/.test(cvv)) {
          alert("‚ö†Ô∏è CVV must be 3 digits.");
          return;
        }

        alert("‚úÖ Payment successful via Card!");
        window.location.href = "payment-success.html";
      }

      if (type === "online") {
        const method = document.getElementById("method").value;
        const acc = document.getElementById("accountInput").value.trim();

        if (method === "Select Method") {
          alert("‚ö†Ô∏è Please select a payment method.");
          return;
        }

        if (method === "UPI") {
          const upiPattern = /^[\w.\-]{2,256}@[a-zA-Z]{2,64}$/;
          if (!upiPattern.test(acc)) {
            alert("‚ö†Ô∏è Enter a valid UPI ID (e.g., username@bank).");
            return;
          }
        } else if (method === "NetBanking") {
          if (!/^\d{9,18}$/.test(acc)) {
            alert("‚ö†Ô∏è Enter a valid account number (9‚Äì18 digits).");
            return;
          }
        } else if (["GPay", "PhonePe", "Paytm"].includes(method)) {
          if (acc === "") {
            alert(`‚ö†Ô∏è Enter your ${method} linked UPI ID or phone number.`);
            return;
          }
        }

        alert(`‚úÖ Payment successful via ${method}!`);
        window.location.href = "payment-success.html";
      }
    }
  </script>
</body>
</html>
